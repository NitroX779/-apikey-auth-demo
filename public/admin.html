<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Panel de Control - ContentalX</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* TUTTI GLI STILI CSS DEL PRIMO ESEMPIO RIMANGONO INVARIATI */
    :root {
      --primary: #00ff88;
      --primary-dark: #00cc6a;
      --primary-light: rgba(0, 255, 136, 0.1);
      --danger: #ff4757;
      --warning: #ffa502;
      --bg-dark: #0a0a0a;
      --bg-card: rgba(25, 25, 25, 0.9);
      --bg-card-hover: rgba(35, 35, 35, 0.95);
      --text-primary: #ffffff;
      --text-secondary: #b0b0b0;
      --border-color: rgba(0, 255, 136, 0.2);
      --shadow-color: rgba(0, 255, 136, 0.1);
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg-dark);
      color: var(--text-primary);
      min-height: 100vh;
      background-image: 
        radial-gradient(circle at 20% 80%, rgba(0, 255, 136, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(0, 255, 136, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 50% 50%, rgba(10, 10, 10, 0.9) 0%, transparent 60%);
      position: relative;
      overflow-x: hidden;
    }
    
    /* Particle Background Effect */
    .particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
    }
    
    .particle {
      position: absolute;
      background: var(--primary);
      border-radius: 50%;
      opacity: 0.1;
      animation: float 20s infinite linear;
    }
    
    @keyframes float {
      0% { transform: translateY(0) rotate(0deg); }
      100% { transform: translateY(-1000px) rotate(720deg); }
    }
    
    /* Header Moderno */
    .header {
      background: rgba(20, 20, 20, 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border-color);
      padding: 1.2rem 2.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
    }
    
    .header-left {
      display: flex;
      align-items: center;
      gap: 1.2rem;
    }
    
    .logo-header {
      width: 45px;
      height: 45px;
      filter: 
        drop-shadow(0 0 10px var(--primary))
        drop-shadow(0 0 20px var(--primary))
        drop-shadow(0 0 30px var(--primary));
      animation: logoGlow 4s ease-in-out infinite;
      transform-style: preserve-3d;
    }
    
    @keyframes logoGlow {
      0%, 100% { 
        filter: 
          drop-shadow(0 0 5px var(--primary))
          drop-shadow(0 0 15px var(--primary));
        transform: scale(1) rotateY(0deg);
      }
      50% { 
        filter: 
          drop-shadow(0 0 15px var(--primary))
          drop-shadow(0 0 30px var(--primary))
          drop-shadow(0 0 45px var(--primary));
        transform: scale(1.05) rotateY(180deg);
      }
    }
    
    .header-content {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .header-left h1 {
      margin: 0;
      background: linear-gradient(135deg, var(--primary), #00ffaa);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      font-size: 1.5rem;
      font-weight: 800;
      letter-spacing: -0.5px;
      text-shadow: 0 5px 15px rgba(0, 255, 136, 0.3);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 300px;
    }
    
    .subtitle {
      color: var(--text-secondary);
      font-size: 0.9rem;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .subtitle::before {
      content: '';
      width: 6px;
      height: 6px;
      background: var(--primary);
      border-radius: 50%;
      display: inline-block;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }
    
    .logout-btn {
      background: linear-gradient(135deg, var(--danger), #ff6b81);
      color: white;
      border: none;
      padding: 0.8rem 1.8rem;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.7rem;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      position: relative;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(255, 71, 87, 0.3);
    }
    
    /* Static header styles */
    
    .logout-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.7s;
    }
    
    .logout-btn:hover::before {
      left: 100%;
    }
    
    .logout-btn:hover {
      transform: translateY(-3px);
      box-shadow: 
        0 8px 30px rgba(255, 71, 87, 0.5),
        0 0 40px rgba(255, 71, 87, 0.2);
    }
    
    .logout-btn:active {
      transform: translateY(-1px);
    }
    
    /* Container principale */
    .container {
      max-width: 1300px;
      margin: 0 auto;
      padding: 2.5rem;
    }
    
    /* Notifiche */
    #notifications {
      margin-bottom: 2rem;
    }
    
    .notification {
      background: rgba(25, 25, 25, 0.9);
      backdrop-filter: blur(10px);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      padding: 1.2rem 1.5rem;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      animation: slideIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
      position: relative;
      overflow: hidden;
      border-left: 4px solid var(--primary);
    }
    
    @keyframes slideIn {
      from { 
        transform: translateY(-30px) scale(0.95); 
        opacity: 0; 
      }
      to { 
        transform: translateY(0) scale(1); 
        opacity: 1; 
      }
    }
    
    .notification::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, var(--primary-light), transparent);
      animation: shimmer 3s infinite;
    }
    
    @keyframes shimmer {
      100% { left: 100%; }
    }
    
    .notification .icon {
      font-size: 1.5rem;
      color: var(--primary);
      margin-right: 1.2rem;
      background: var(--primary-light);
      width: 45px;
      height: 45px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .notification .message {
      flex-grow: 1;
      font-weight: 500;
    }
    
    .notification .copy-btn {
      background: var(--primary);
      color: #000;
      border: none;
      padding: 0.6rem 1.2rem;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.1);
      display: flex;
      align-items: center;
      gap: 0.5rem;
      min-width: 100px;
      justify-content: center;
    }
    
    .notification .copy-btn:hover {
      background: #00ffaa;
      transform: translateY(-2px);
      box-shadow: 0 5px 20px rgba(0, 255, 136, 0.4);
    }
    
    /* Card principale */
    .card {
      background: var(--bg-card);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border: 1px solid var(--border-color);
      border-radius: 20px;
      padding: 2rem;
      margin-bottom: 2rem;
      box-shadow: 
        0 10px 40px rgba(0, 0, 0, 0.4),
        0 0 60px var(--shadow-color);
      animation: cardAppear 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      position: relative;
      overflow: hidden;
      transition: all 0.4s ease;
    }
    
    @keyframes cardAppear {
      from { 
        opacity: 0; 
        transform: translateY(40px) scale(0.95); 
      }
      to { 
        opacity: 1; 
        transform: translateY(0) scale(1); 
      }
    }
    
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, var(--primary-light), transparent 70%);
      opacity: 0.1;
      z-index: -1;
    }
    
    .card:hover {
      border-color: rgba(0, 255, 136, 0.4);
      box-shadow: 
        0 15px 50px rgba(0, 0, 0, 0.5),
        0 0 80px rgba(0, 255, 136, 0.2);
      transform: translateY(-5px);
    }
    
    .card h2 {
      color: var(--primary);
      margin-top: 0;
      margin-bottom: 1.8rem;
      font-weight: 700;
      font-size: 1.6rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      text-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
    }
    
    .card h2::before {
      content: '';
      width: 8px;
      height: 8px;
      background: var(--primary);
      border-radius: 50%;
      display: inline-block;
      box-shadow: 0 0 15px var(--primary);
    }
    
    /* Form Groups */
    .form-group {
      margin-bottom: 1.5rem;
      position: relative;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 0.7rem;
      color: var(--text-primary);
      font-weight: 600;
      font-size: 0.95rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      display: flex;
      align-items: center;
      gap: 0.7rem;
    }
    
    .form-group label i {
      color: var(--primary);
      font-size: 1.1rem;
    }
    
    .form-group input {
      width: 100%;
      padding: 1rem 1.2rem;
      background: rgba(20, 20, 20, 0.8);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      color: var(--text-primary);
      font-size: 1rem;
      font-weight: 500;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.1);
      font-family: 'Inter', sans-serif;
    }
    
    .form-group input:focus {
      border-color: var(--primary);
      box-shadow: 
        0 0 0 4px var(--primary-light),
        0 0 30px rgba(0, 255, 136, 0.2);
      background: rgba(25, 25, 25, 0.9);
      outline: none;
      transform: translateY(-2px);
    }
    
    .form-group input:read-only {
      opacity: 0.7;
      cursor: not-allowed;
      background: rgba(30, 30, 30, 0.6);
    }
    
    /* Bottoni principali */
    .btn-primary {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: #000;
      border: none;
      padding: 1rem 2.2rem;
      border-radius: 14px;
      cursor: pointer;
      font-weight: 700;
      font-size: 1rem;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      box-shadow: 
        0 6px 25px rgba(0, 255, 136, 0.4),
        0 0 40px rgba(0, 255, 136, 0.1);
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      gap: 0.8rem;
      width: 100%;
      justify-content: center;
      margin-top: 1rem;
    }
    
    .btn-primary::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.7s;
    }
    
    .btn-primary:hover::before {
      left: 100%;
    }
    
    .btn-primary:hover {
      transform: translateY(-4px);
      box-shadow: 
        0 12px 35px rgba(0, 255, 136, 0.6),
        0 0 60px rgba(0, 255, 136, 0.3);
    }
    
    .btn-primary:active {
      transform: translateY(-1px);
    }
    
    /* Sezione formato */
    .format-section {
      margin-top: 2.5rem;
      padding-top: 2rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      position: relative;
    }
    
    .format-section::before {
      content: '';
      position: absolute;
      top: -1px;
      left: 0;
      width: 60px;
      height: 2px;
      background: linear-gradient(90deg, var(--primary), transparent);
      border-radius: 2px;
    }
    
    .format-section h3 {
      color: var(--text-primary);
      margin-bottom: 1.5rem;
      font-weight: 600;
      font-size: 1.3rem;
      display: flex;
      align-items: center;
      gap: 0.8rem;
    }
    
    .format-section h3 i {
      color: var(--primary);
      font-size: 1.2rem;
    }
    
    .format-preview {
      background: rgba(0, 0, 0, 0.5);
      border: 2px solid var(--border-color);
      border-radius: 14px;
      padding: 1.5rem;
      font-family: 'JetBrains Mono', 'Courier New', monospace;
      color: var(--primary);
      margin-top: 1rem;
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
      letter-spacing: 1px;
      position: relative;
      overflow: hidden;
      box-shadow: inset 0 0 30px rgba(0, 255, 136, 0.1);
      transition: all 0.3s ease;
    }
    
    .format-preview:hover {
      border-color: rgba(0, 255, 136, 0.4);
      box-shadow: 
        inset 0 0 40px rgba(0, 255, 136, 0.15),
        0 0 40px rgba(0, 255, 136, 0.1);
      transform: translateY(-2px);
    }
    
    /* Lista licenze */
    .license-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }
    
    .license-card {
      background: var(--bg-card);
      backdrop-filter: blur(10px);
      border: 1px solid var(--border-color);
      border-radius: 18px;
      padding: 1.5rem;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
      animation: licenseAppear 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.1);
      animation-fill-mode: both;
      position: relative;
      overflow: hidden;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.1);
    }
    
    @keyframes licenseAppear {
      from { 
        opacity: 0; 
        transform: translateY(30px) scale(0.95); 
      }
      to { 
        opacity: 1; 
        transform: translateY(0) scale(1); 
      }
    }
    
    .license-card:nth-child(1) { animation-delay: 0.1s; }
    .license-card:nth-child(2) { animation-delay: 0.2s; }
    .license-card:nth-child(3) { animation-delay: 0.3s; }
    .license-card:nth-child(4) { animation-delay: 0.4s; }
    .license-card:nth-child(5) { animation-delay: 0.5s; }
    
    .license-card:hover {
      background: var(--bg-card-hover);
      border-color: rgba(0, 255, 136, 0.4);
      transform: translateY(-8px);
      box-shadow: 
        0 15px 40px rgba(0, 0, 0, 0.4),
        0 0 60px rgba(0, 255, 136, 0.15);
    }
    
    .license-card .key {
      font-family: 'JetBrains Mono', 'Courier New', monospace;
      background: rgba(0, 0, 0, 0.5);
      padding: 1.2rem;
      border-radius: 12px;
      margin-bottom: 1.2rem;
      color: var(--primary);
      word-break: break-all;
      border: 1px solid var(--border-color);
      position: relative;
      padding-right: 100px;
      transition: all 0.3s ease;
    }
    
    .license-card:hover .key {
      border-color: rgba(0, 255, 136, 0.4);
      box-shadow: inset 0 0 20px rgba(0, 255, 136, 0.1);
    }
    
    .license-card .details {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }
    
    .used-info {
      font-size: 0.9rem;
      color: var(--text-secondary);
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .used-info i {
      color: var(--primary);
      font-size: 0.9rem;
    }
    
    /* Checkbox moderna */
    .key-checkbox {
      position: absolute;
      top: 1.2rem;
      right: 1.2rem;
      width: 22px;
      height: 22px;
      cursor: pointer;
      appearance: none;
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid var(--border-color);
      border-radius: 6px;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.1);
      box-shadow: 0 4px 15px rgba(0, 255, 136, 0.2);
      z-index: 2;
    }
    
    .key-checkbox:hover {
      transform: scale(1.2) rotate(15deg);
      border-color: var(--primary);
      box-shadow: 
        0 6px 25px rgba(0, 255, 136, 0.4),
        0 0 30px rgba(0, 255, 136, 0.2);
    }
    
    .key-checkbox:checked {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      border-color: var(--primary);
      transform: scale(1.1) rotate(0deg);
      box-shadow: 
        0 6px 25px rgba(0, 255, 136, 0.6),
        0 0 40px rgba(0, 255, 136, 0.3);
    }
    
    .key-checkbox:checked::after {
      content: '✓';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #000;
      font-size: 12px;
      font-weight: 900;
      animation: checkPop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    
    @keyframes checkPop {
      0% { transform: translate(-50%, -50%) scale(0); }
      70% { transform: translate(-50%, -50%) scale(1.3); }
      100% { transform: translate(-50%, -50%) scale(1); }
    }
    
    /* Status badges */
    .status-badge {
      padding: 0.5rem 1.2rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      min-width: 100px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    
    .status-badge::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      animation: statusShimmer 2s infinite;
    }
    
    @keyframes statusShimmer {
      100% { left: 100%; }
    }
    
    .status-active {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: #000;
      border: 1px solid rgba(0, 255, 136, 0.4);
      box-shadow: 0 0 20px rgba(0, 255, 136, 0.2);
    }
    
    .status-expired {
      background: linear-gradient(135deg, var(--danger), #ff6b81);
      color: white;
      border: 1px solid rgba(255, 71, 87, 0.4);
      box-shadow: 0 0 20px rgba(255, 71, 87, 0.2);
    }
    
    .status-banned {
      background: linear-gradient(135deg, var(--warning), #ffb142);
      color: #000;
      border: 1px solid rgba(255, 165, 2, 0.4);
      box-shadow: 0 0 20px rgba(255, 165, 2, 0.2);
    }
    
    /* Bottone settings con dropdown */
    .settings-btn {
      position: absolute;
      bottom: 1.2rem;
      right: 1.2rem;
      background: linear-gradient(135deg, rgba(255, 71, 87, 0.15), rgba(231, 76, 60, 0.1));
      color: var(--danger);
      border: 1px solid rgba(255, 71, 87, 0.2);
      width: 40px;
      height: 40px;
      border-radius: 12px;
      cursor: pointer;
      font-size: 1.1rem;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.1);
      display: flex;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(5px);
      z-index: 10;
    }
    
    .settings-btn:hover {
      background: linear-gradient(135deg, rgba(255, 71, 87, 0.25), rgba(231, 76, 60, 0.2));
      color: white;
      transform: scale(1.2) rotate(90deg);
      box-shadow: 
        0 6px 25px rgba(255, 71, 87, 0.4),
        0 0 30px rgba(231, 76, 60, 0.2);
    }
    
    /* Dropdown Menu Moderno */
    .dropdown-menu {
      position: fixed;
      background: rgba(30, 30, 30, 0.98);
      backdrop-filter: blur(30px);
      -webkit-backdrop-filter: blur(30px);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      padding: 0.8rem;
      box-shadow: 
        0 20px 60px rgba(0, 0, 0, 0.5),
        0 0 100px rgba(0, 255, 136, 0.15);
      z-index: 2000;
      min-width: 220px;
      opacity: 0;
      visibility: hidden;
      transform: translateY(20px) scale(0.95);
      transform-origin: top right;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    
    .dropdown-menu.show {
      opacity: 1;
      visibility: visible;
      transform: translateY(0) scale(1);
    }
    
    .dropdown-menu::before {
      content: '';
      position: absolute;
      top: -8px;
      right: 20px;
      width: 16px;
      height: 16px;
      background: rgba(30, 30, 30, 0.98);
      transform: rotate(45deg);
      border-top: 1px solid var(--border-color);
      border-left: 1px solid var(--border-color);
      z-index: -1;
    }
    
    .dropdown-item {
      padding: 0.9rem 1.2rem;
      background: transparent;
      color: var(--text-primary);
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 500;
      width: 100%;
      text-align: left;
      transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.1);
      display: flex;
      align-items: center;
      gap: 1rem;
      font-size: 0.95rem;
      position: relative;
      overflow: hidden;
    }
    
    .dropdown-item::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, var(--primary-light), transparent);
      transition: left 0.6s;
    }
    
    .dropdown-item:hover::before {
      left: 100%;
    }
    
    .dropdown-item:hover {
      background: rgba(255, 255, 255, 0.05);
      color: var(--primary);
      transform: translateX(8px);
    }
    
    .dropdown-item i {
      width: 20px;
      text-align: center;
      font-size: 1.1rem;
      transition: transform 0.3s ease;
    }
    
    .dropdown-item:hover i {
      transform: scale(1.2);
    }
    
    /* Azioni bulk */
    .bulk-actions {
      margin-top: 2rem;
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }
    
    .bulk-actions .btn-primary {
      width: auto;
      margin-top: 0;
      padding: 0.9rem 1.8rem;
      font-size: 0.95rem;
    }
    
    /* Cost Summary */
    .cost-summary {
      background: linear-gradient(135deg, var(--primary-light), rgba(0, 212, 255, 0.1));
      border: 1px solid var(--border-color);
      border-radius: 16px;
      padding: 1.5rem;
      text-align: center;
      margin-top: 2rem;
      position: relative;
      overflow: hidden;
      box-shadow: 0 8px 30px rgba(0, 255, 136, 0.2);
    }
    
    .cost-summary h3 {
      margin: 0;
      color: var(--primary);
      font-size: 1.8rem;
      font-weight: 800;
      margin-bottom: 0.5rem;
      text-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
    }
    
    .cost-summary p {
      margin: 0;
      color: var(--text-secondary);
      font-size: 0.95rem;
      font-weight: 500;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .header {
        padding: 1rem;
      }
      
      .container {
        padding: 1.5rem;
      }
      
      .license-list {
        grid-template-columns: 1fr;
      }
      
      .bulk-actions {
        flex-direction: column;
      }
      
      .bulk-actions .btn-primary {
        width: 100%;
      }
      
      .card {
        padding: 1.5rem;
      }
    }
    
    /* Animazioni aggiuntive */
    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    
    .rotating {
      animation: rotate 20s linear infinite;
    }
    
    /* Scrollbar personalizzata */
    ::-webkit-scrollbar {
      width: 10px;
    }
    
    ::-webkit-scrollbar-track {
      background: rgba(20, 20, 20, 0.5);
      border-radius: 5px;
    }
    
    ::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      border-radius: 5px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(135deg, #00ffaa, var(--primary));
    }
  </style>
</head>
<body>
  <!-- Particle Background -->
  <div class="particles" id="particles"></div>

  <!-- Header -->
  <div class="header">
    <div class="header-left">
      <div class="header-content">
        <img src="/Logo/image_1_1765411428289-removebg-preview.png" alt="Logo" class="logo-header">
        <div>
          <h1>Panel de Control</h1>
          <div class="subtitle" id="userSubtitle">ContentalX · Admin</div>
        </div>
      </div>
    </div>
    <button class="logout-btn" id="logout">
      <i class="fas fa-sign-out-alt"></i>
      Logout
    </button>
  </div>

  <div class="container">
    <div id="notifications"></div>

    <div class="card">
      <h2>
        <i class="fas fa-key"></i>
        Generar Licencias
      </h2>
      <div class="form-group">
        <label for="expiryDays">
          <i class="fas fa-calendar-alt"></i>
          Duración (días)
        </label>
        <input id="expiryDays" type="number" value="30">
      </div>
      <div class="form-group">
        <label for="maxUses">
          <i class="fas fa-repeat"></i>
          Usos máximos
        </label>
        <input id="maxUses" type="number" value="1">
      </div>
      <div class="form-group">
        <label for="count">
          <i class="fas fa-hashtag"></i>
          Cantidad
        </label>
        <input id="count" type="number" value="1">
      </div>
      <button class="btn-primary" id="create">
        <i class="fas fa-bolt"></i>
        Generar Licencias
      </button>

      <div class="format-section">
        <h3>
          <i class="fas fa-code"></i>
          Formato Licenza
        </h3>
        <div class="form-group">
          <label for="prefix">
            <i class="fas fa-tag"></i>
            Prefijo
          </label>
          <input id="prefix" type="text" value="ContentalX-" readonly>
        </div>
        <div class="form-group">
          <label for="customPart">
            <i class="fas fa-edit"></i>
            Parte personalizzabile
          </label>
          <input id="customPart" type="text" value="" placeholder="Es. PRO">
        </div>
        <div class="format-preview" id="preview">ContentalX-</div>
      </div>

      <div class="cost-summary">
        <h3 id="estimatedCost">0 Credits</h3>
        <p>Costo estimado para la generación</p>
      </div>
    </div>

    <div class="card">
      <h2>
        <i class="fas fa-key"></i>
        Tus Licencias
      </h2>
      <div class="license-list" id="keys"></div>
      <div class="bulk-actions">
        <button class="btn-primary" id="deleteSelected">
          <i class="fas fa-trash-alt"></i>
          Eliminar Seleccionadas
        </button>
        <button class="btn-primary" id="resetSelected">
          <i class="fas fa-redo-alt"></i>
          Reset HWID Seleccionadas
        </button>
      </div>
    </div>
  </div>

  <!-- Settings Dropdown Template -->
  <div id="dropdownTemplate" class="dropdown-menu">
    <button class="dropdown-item" data-action="resetHwid">
      <i class="fas fa-redo"></i>
      Reset HWID
    </button>
    <button class="dropdown-item" data-action="modifyLabel">
      <i class="fas fa-tag"></i>
      Modificar Label
    </button>
    <button class="dropdown-item" data-action="addDays">
      <i class="fas fa-calendar-plus"></i>
      Agregar Días
    </button>
    <button class="dropdown-item" data-action="deleteKey" style="color: var(--danger);">
      <i class="fas fa-trash"></i>
      Eliminar
    </button>
    <button class="dropdown-item" data-action="banKey" style="color: var(--warning);">
      <i class="fas fa-ban"></i>
      Banear
    </button>
    <button class="dropdown-item" data-action="unbanKey">
      <i class="fas fa-check-circle"></i>
      Desbanear
    </button>
  </div>

  <script>
    // Variabili globali
    let currentDropdown = null;
    let currentLicenseKey = null;
    let currentLicenseCard = null;
    
    // Developer tools detection and blocking
    function blockDevTools() {
      // Disable right-click
      document.addEventListener('contextmenu', function(e) {
        e.preventDefault();
        return false;
      });
      
      // Disable F12, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+U
      document.addEventListener('keydown', function(e) {
        if (
          e.keyCode === 123 || // F12
          (e.ctrlKey && e.shiftKey && (e.keyCode === 73 || e.keyCode === 74)) || // Ctrl+Shift+I/J
          (e.ctrlKey && e.keyCode === 85) // Ctrl+U
        ) {
          e.preventDefault();
          return false;
        }
      });
      
      // More aggressive detection for Chrome menu
      const detectChromeDevTools = () => {
        // Check for dev tools through various methods
        const start = performance.now();
        debugger;
        const end = performance.now();
        
        // If debugger pause took significant time, dev tools likely open
        if (end - start > 100) {
          triggerBlock();
        }
        
        // Check console methods
        if (console.clear) {
          const originalClear = console.clear;
          console.clear = function() {
            triggerBlock();
            return originalClear.apply(this, arguments);
          };
        }
      };
      
      // Trigger blocking mechanism
      function triggerBlock() {
        document.body.innerHTML = `
          <div style="
            width: 100vw;
            height: 100vh;
            background: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: Arial, sans-serif;
            font-size: 18px;
            color: #333;
          ">
            Developer Tools Detected - Access Blocked
          </div>
        `;
      }
      
      // Detect dev tools opening
      let devtools = {
        open: false,
        orientation: null
      };
      
      const threshold = 160;
      
      // Regular size checking
      setInterval(() => {
        if (window.outerHeight - window.innerHeight > threshold || 
            window.outerWidth - window.innerWidth > threshold) {
          if (!devtools.open) {
            devtools.open = true;
            triggerBlock();
          }
        }
      }, 500);
      
      // Chrome-specific detection
      setInterval(detectChromeDevTools, 1000);
      
      // Additional protection against menu access
      document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
          // Page lost focus, might be dev tools
          setTimeout(() => {
            if (document.hidden) {
              triggerBlock();
            }
          }, 100);
        }
      });
    }

    // Security check function
    function checkAuthentication() {
      return fetch('/me')
        .then(response => response.json())
        .then(data => {
          if (!data.loggedIn) {
            // Show white screen if not authenticated
            document.body.innerHTML = `
              <div style="
                width: 100vw;
                height: 100vh;
                background: white;
                display: flex;
                justify-content: center;
                align-items: center;
                font-family: Arial, sans-serif;
                font-size: 18px;
                color: #333;
              ">
                Access Denied - Unauthorized
              </div>
            `;
            return false;
          } else {
            // User is authenticated, continue with normal initialization
            document.getElementById('userSubtitle').textContent = 'ContentalX · ' + data.username + ' · Online';
            return true;
          }
        })
        .catch(error => {
          console.error('Security check failed:', error);
          // Show white screen on error
          document.body.innerHTML = `
            <div style="
              width: 100vw;
              height: 100vh;
              background: white;
              display: flex;
              justify-content: center;
              align-items: center;
              font-family: Arial, sans-serif;
              font-size: 18px;
              color: #333;
            ">
              Security Error - Access Blocked
            </div>
          `;
          return false;
        });
    }

    // Inizializzazione
    document.addEventListener('DOMContentLoaded', function() {
      // Block developer tools first
      blockDevTools();
      
      // Then check authentication and load keys afterward
      checkAuthentication().then(isAuthenticated => {
        if (isAuthenticated) {
          createParticles();
          setupEventListeners();
          updatePreview();
          setupColorPicker();
          
          // Carica le key esistenti dopo aver confermato l'autenticazione
          loadExistingKeys();
          
          // Chiudi dropdown se clicchi fuori
          document.addEventListener('click', function(e) {
            if (currentDropdown && !e.target.closest('.dropdown-menu') && !e.target.closest('.settings-btn')) {
              closeDropdown();
            }
          });
        }
        // If not authenticated, the checkAuthentication function already handled the redirect
      });
    });

    // Particelle animazione
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      const particleCount = 50;
      
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        
        const size = Math.random() * 4 + 1;
        const posX = Math.random() * 100;
        const delay = Math.random() * 20;
        const duration = Math.random() * 20 + 10;
        
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.left = `${posX}%`;
        particle.style.top = '100%';
        particle.style.animationDelay = `${delay}s`;
        particle.style.animationDuration = `${duration}s`;
        
        particlesContainer.appendChild(particle);
      }
    }

    // Setup event listeners
    function setupEventListeners() {
      // Preview aggiornamento
      document.getElementById('customPart').addEventListener('input', updatePreview);
      document.getElementById('expiryDays').addEventListener('input', calculateCost);
      document.getElementById('maxUses').addEventListener('input', calculateCost);
      document.getElementById('count').addEventListener('input', calculateCost);
      
      // Logout
      document.getElementById('logout').addEventListener('click', async function() {
        if (confirm('¿Estás seguro de que quieres cerrar sesión?')) {
          try {
            // Effettua il logout reale
            const response = await fetch('/logout', { 
              method: 'POST',
              headers: { 
                'Content-Type': 'application/json'
              }
            });
            
            if (response.ok) {
              showNotification('Sesión cerrada exitosamente', 'success');
              setTimeout(() => {
                window.location.href = '/login.html';
              }, 1000);
            } else {
              showNotification('Error al cerrar sesión', 'error');
            }
          } catch (error) {
            console.error('Logout error:', error);
            showNotification('Error de conexión', 'error');
          }
        }
      });
      
      // Generazione licenze REALI
      document.getElementById('create').addEventListener('click', async function() {
        const expiryDays = parseInt(document.getElementById('expiryDays').value);
        const maxUses = parseInt(document.getElementById('maxUses').value);
        const count = parseInt(document.getElementById('count').value);
        const customPart = document.getElementById('customPart').value.trim();
        
        console.log('=== GENERATING KEYS CLIENT SIDE ===');
        console.log('Form values:', { expiryDays, maxUses, count, customPart });
        
        if (!expiryDays || !maxUses || !count) {
          showNotification('Por favor completa todos los campos', 'error');
          return;
        }
        
        if (count > 100) {
          showNotification('No puedes generar más de 100 licencias a la vez', 'error');
          return;
        }
        
        showNotification(`Generando ${count} licencias...`, 'info');
        
        try {
          // Chiamata reale al server per generare le key
          const requestBody = {
            expiryDays: expiryDays,
            maxUses: maxUses,
            count: count,
            customPart: customPart
          };
          
          console.log('Sending request:', requestBody);
          
          const response = await fetch('/api/generate-keys', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(requestBody)
          });
          
          console.log('Response status:', response.status);
          console.log('Response ok:', response.ok);
          
          if (response.ok) {
            const result = await response.json();
            console.log('Server response:', result);
            
            if (result.keys && result.keys.length > 0) {
              showNotification(`${result.keys.length} licencias generadas exitosamente`, 'success');
              addNewLicenses(result.keys);
              
              // Reset form
              document.getElementById('expiryDays').value = 30;
              document.getElementById('maxUses').value = 1;
              document.getElementById('count').value = 1;
              document.getElementById('customPart').value = '';
              updatePreview();
              calculateCost();
            } else {
              showNotification('El servidor respondió pero no devolvió keys válidas', 'warning');
              console.warn('Empty or invalid keys array received:', result);
            }
          } else {
            const errorText = await response.text();
            console.error('Server error response:', errorText);
            try {
              const error = JSON.parse(errorText);
              showNotification('Error al generar licencias: ' + error.error, 'error');
            } catch {
              showNotification('Error del servidor: ' + errorText, 'error');
            }
          }
        } catch (error) {
          console.error('Generation error:', error);
          showNotification('Error de conexión al servidor: ' + error.message, 'error');
        }
      });
      
      // Azioni bulk
      document.getElementById('deleteSelected').addEventListener('click', function() {
        const selected = document.querySelectorAll('.key-checkbox:checked');
        if (selected.length === 0) {
          showNotification('Por favor selecciona al menos una licencia', 'error');
          return;
        }
        
        if (confirm(`¿Estás seguro de eliminar ${selected.length} licencias seleccionadas?`)) {
          showNotification(`${selected.length} licencias eliminadas exitosamente`, 'success');
          selected.forEach(checkbox => {
            const card = checkbox.closest('.license-card');
            if (card) {
              card.style.opacity = '0';
              card.style.transform = 'translateY(20px)';
              setTimeout(() => card.remove(), 300);
            }
          });
        }
      });
      
      document.getElementById('resetSelected').addEventListener('click', function() {
        const selected = document.querySelectorAll('.key-checkbox:checked');
        if (selected.length === 0) {
          showNotification('Por favor selecciona al menos una licencia', 'error');
          return;
        }
        
        selected.forEach(checkbox => {
          const card = checkbox.closest('.license-card');
          if (card) {
            const hwidElement = card.querySelector('.used-info:nth-child(5)');
            if (hwidElement) {
              hwidElement.innerHTML = '<i class="fas fa-microchip"></i> HWID: N/A';
            }
          }
        });
        
        showNotification(`HWID reset para ${selected.length} licencias seleccionadas`, 'success');
      });
    }

    // Genera chiavi
    function generateKeys(count, expiryDays, maxUses, customPart) {
      const keys = [];
      const prefix = 'ContentalX-';
      
      for (let i = 0; i < count; i++) {
        const randomPart = Math.random().toString(36).substring(2, 7).toUpperCase();
        const custom = customPart ? customPart.toUpperCase() : '';
        const separator = custom ? '-' : '';
        const key = `${prefix}${custom}${separator}${randomPart}`;
        
        // Calcola data di scadenza
        const expiryDate = new Date();
        expiryDate.setDate(expiryDate.getDate() + expiryDays);
        const formattedDate = expiryDate.toISOString().split('T')[0];
        
        keys.push({
          key: key,
          label: customPart || 'Nuova Licenza',
          status: 'active',
          uses: `0/${maxUses}`,
          expiry: formattedDate,
          hwid: 'N/A'
        });
      }
      
      return keys;
    }

    // Aggiungi nuove licenze alla lista
    function addNewLicenses(keys) {
      const keysContainer = document.getElementById('keys');
      
      keys.forEach(license => {
        const licenseCard = createLicenseCard(license);
        keysContainer.prepend(licenseCard);
      });
    }

    // Crea card licenza
    function createLicenseCard(license) {
      const licenseCard = document.createElement('div');
      licenseCard.className = 'license-card';
      licenseCard.dataset.key = license.key;
      
      let statusClass = '';
      let statusText = '';
      
      switch(license.status) {
        case 'active':
          statusClass = 'status-active';
          statusText = 'ACTIVA';
          break;
        case 'expired':
          statusClass = 'status-expired';
          statusText = 'EXPIRADA';
          break;
        case 'banned':
          statusClass = 'status-banned';
          statusText = 'BANEADA';
          break;
      }
      
      licenseCard.innerHTML = `
        <input type="checkbox" class="key-checkbox" data-key="${license.key}">
        
        <div class="key">${license.key}</div>
        
        <div class="details">
          <span class="used-info">
            <i class="fas fa-chart-bar"></i>
            ${license.uses} usos
          </span>
          <span class="status-badge ${statusClass}">${statusText}</span>
        </div>
        
        <div class="used-info">
          <i class="fas fa-calendar"></i>
          Expira: ${license.expiry}
        </div>
        
        ${license.label ? `
          <div class="used-info">
            <i class="fas fa-tag"></i>
            Label: ${license.label}
          </div>
        ` : ''}
        
        <div class="used-info">
          <i class="fas fa-microchip"></i>
          HWID: ${license.hwid}
        </div>
        
        <button class="settings-btn">
          <i class="fas fa-ellipsis-v"></i>
        </button>
      `;
      
      // Aggiungi event listeners
      const settingsBtn = licenseCard.querySelector('.settings-btn');
      const keyElement = licenseCard.querySelector('.key');
      
      settingsBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        e.preventDefault();
        openDropdown(this, license.key, licenseCard);
      });
      
      keyElement.addEventListener('click', function() {
        copyToClipboard(license.key, this);
      });
      
      return licenseCard;
    }

    // Apri dropdown menu
    function openDropdown(button, licenseKey, licenseCard) {
      // Chiudi dropdown precedente se esiste
      if (currentDropdown) {
        closeDropdown();
      }
      
      currentLicenseKey = licenseKey;
      currentLicenseCard = licenseCard;
      
      // Clona il template del dropdown
      const dropdownTemplate = document.getElementById('dropdownTemplate');
      currentDropdown = dropdownTemplate.cloneNode(true);
      currentDropdown.id = 'dropdown-' + Date.now();
      currentDropdown.style.display = 'block';
      
      // Posiziona il dropdown vicino al bottone
      const rect = button.getBoundingClientRect();
      currentDropdown.style.position = 'absolute';
      currentDropdown.style.top = (rect.bottom + window.scrollY) + 'px';
      currentDropdown.style.right = (window.innerWidth - rect.right) + 'px';
      
      // Aggiungi al documento
      document.body.appendChild(currentDropdown);
      
      // Setup event listeners per le azioni del dropdown
      setupDropdownActions();
      
      // Mostra con animazione
      setTimeout(() => {
        currentDropdown.classList.add('show');
      }, 10);
    }

    // Chiudi dropdown menu
    function closeDropdown() {
      if (currentDropdown) {
        currentDropdown.classList.remove('show');
        setTimeout(() => {
          if (currentDropdown && currentDropdown.parentNode) {
            currentDropdown.parentNode.removeChild(currentDropdown);
          }
          currentDropdown = null;
          currentLicenseKey = null;
          currentLicenseCard = null;
        }, 300);
      }
    }

    // Setup azioni dropdown
    function setupDropdownActions() {
      if (!currentDropdown) return;
      
      currentDropdown.querySelectorAll('.dropdown-item').forEach(item => {
        item.addEventListener('click', function(e) {
          e.stopPropagation();
          const action = this.dataset.action;
          executeDropdownAction(action);
          closeDropdown();
        });
      });
    }

    // Esegui azione dropdown
    function executeDropdownAction(action) {
      if (!currentLicenseKey || !currentLicenseCard) return;
      
      switch(action) {
        case 'resetHwid':
          resetHwid(currentLicenseCard);
          break;
        case 'modifyLabel':
          modifyLabel(currentLicenseCard);
          break;
        case 'addDays':
          addDays(currentLicenseCard);
          break;
        case 'deleteKey':
          deleteKey(currentLicenseCard);
          break;
        case 'banKey':
          banKey(currentLicenseCard);
          break;
        case 'unbanKey':
          unbanKey(currentLicenseCard);
          break;
      }
    }

    // Funzioni azioni dropdown
    function resetHwid(card) {
      const hwidElements = card.querySelectorAll('.used-info');
      // Trova l'elemento HWID (solitamente l'ultimo)
      for (let i = hwidElements.length - 1; i >= 0; i--) {
        if (hwidElements[i].textContent.includes('HWID:')) {
          hwidElements[i].innerHTML = '<i class="fas fa-microchip"></i> HWID: N/A';
          showNotification('HWID reseteado exitosamente', 'success');
          break;
        }
      }
    }

    function modifyLabel(card) {
      const labelElements = card.querySelectorAll('.used-info');
      let currentLabelElement = null;
      let currentText = '';
      
      // Cerca l'elemento label esistente
      for (let element of labelElements) {
        if (element.textContent.includes('Label:')) {
          currentLabelElement = element;
          currentText = element.textContent.replace('Label:', '').trim();
          break;
        }
      }
      
      const newLabel = prompt('Ingresa el nuevo label para la licencia:', currentText);
      if (newLabel !== null && newLabel.trim() !== '') {
        if (currentLabelElement) {
          // Aggiorna label esistente
          currentLabelElement.innerHTML = `<i class="fas fa-tag"></i> Label: ${newLabel}`;
        } else {
          // Crea nuovo elemento label
          const labelElement = document.createElement('div');
          labelElement.className = 'used-info';
          labelElement.innerHTML = `<i class="fas fa-tag"></i> Label: ${newLabel}`;
          
          // Trova l'elemento expiry e inserisci dopo
          const expiryElement = card.querySelector('.used-info:nth-child(3)');
          if (expiryElement) {
            expiryElement.after(labelElement);
          }
        }
        
        showNotification('Label actualizado exitosamente', 'success');
      }
    }

    function addDays(card) {
      const days = prompt('¿Cuántos días quieres agregar?', '30');
      if (days && !isNaN(days) && parseInt(days) > 0) {
        const expiryElements = card.querySelectorAll('.used-info');
        let expiryElement = null;
        
        // Cerca l'elemento expiry
        for (let element of expiryElements) {
          if (element.textContent.includes('Expira:')) {
            expiryElement = element;
            break;
          }
        }
        
        if (expiryElement) {
          const currentText = expiryElement.textContent;
          const currentDateStr = currentText.replace('Expira:', '').trim();
          
          try {
            const currentDate = new Date(currentDateStr);
            const newDate = new Date(currentDate);
            newDate.setDate(newDate.getDate() + parseInt(days));
            const formattedDate = newDate.toISOString().split('T')[0];
            
            expiryElement.innerHTML = `<i class="fas fa-calendar"></i> Expira: ${formattedDate}`;
            showNotification(`${days} días agregados exitosamente`, 'success');
          } catch (e) {
            showNotification('Error al procesar la fecha', 'error');
          }
        }
      }
    }

    function deleteKey(card) {
      if (confirm('¿Estás seguro de eliminar esta licencia?')) {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        setTimeout(() => {
          if (card.parentNode) {
            card.remove();
            showNotification('Licencia eliminada exitosamente', 'success');
          }
        }, 300);
      }
    }

    function banKey(card) {
      if (confirm('¿Estás seguro de banear esta licencia?')) {
        const statusBadge = card.querySelector('.status-badge');
        if (statusBadge) {
          statusBadge.className = 'status-badge status-banned';
          statusBadge.textContent = 'BANEADA';
          showNotification('Licencia baneada exitosamente', 'warning');
        }
      }
    }

    function unbanKey(card) {
      const statusBadge = card.querySelector('.status-badge');
      if (statusBadge) {
        statusBadge.className = 'status-badge status-active';
        statusBadge.textContent = 'ACTIVA';
        showNotification('Licencia desbaneada exitosamente', 'success');
      }
    }

    // Aggiorna preview licenza
    function updatePreview() {
      const prefix = document.getElementById('prefix').value;
      const customPart = document.getElementById('customPart').value.trim();
      const preview = document.getElementById('preview');
      
      if (customPart) {
        preview.textContent = `${prefix}${customPart.toUpperCase()}-XXXXX`;
      } else {
        preview.textContent = `${prefix}XXXXX`;
      }
      
      calculateCost();
    }

    // Calcola costo stimato
    function calculateCost() {
      const expiryDays = parseInt(document.getElementById('expiryDays').value) || 0;
      const maxUses = parseInt(document.getElementById('maxUses').value) || 0;
      const count = parseInt(document.getElementById('count').value) || 0;
      
      // Formula di costo semplificata
      const baseCost = 5; // Costo base per licenza
      const expiryMultiplier = expiryDays / 30; // Moltiplicatore per durata
      const usesMultiplier = maxUses > 1 ? 1 + (maxUses - 1) * 0.2 : 1; // Moltiplicatore per usi multipli
      
      const cost = Math.round(count * baseCost * expiryMultiplier * usesMultiplier);
      document.getElementById('estimatedCost').textContent = `${cost} Credits`;
    }

    // Mostra notifiche
    function showNotification(message, type = 'info') {
      const container = document.getElementById('notifications');
      const notification = document.createElement('div');
      notification.className = 'notification';
      
      let icon = 'fa-info-circle';
      if (type === 'success') icon = 'fa-check-circle';
      if (type === 'error') icon = 'fa-exclamation-circle';
      if (type === 'warning') icon = 'fa-exclamation-triangle';
      
      notification.innerHTML = `
        <div class="icon">
          <i class="fas ${icon}"></i>
        </div>
        <div class="message">${message}</div>
        <button class="copy-btn">
          <i class="fas fa-copy"></i>
          Copiar
        </button>
      `;
      
      container.appendChild(notification);
      
      // Aggiungi event listener per copiare
      const copyBtn = notification.querySelector('.copy-btn');
      copyBtn.addEventListener('click', function() {
        copyToClipboard(message, this);
      });
      
      // Auto-rimuovi dopo 5 secondi
      setTimeout(() => {
        notification.style.opacity = '0';
        notification.style.transform = 'translateY(-20px)';
        setTimeout(() => notification.remove(), 300);
      }, 5000);
    }

    // Copia al clipboard
    function copyToClipboard(text, element) {
      navigator.clipboard.writeText(text).then(() => {
        if (element) {
          const originalText = element.innerHTML;
          element.innerHTML = '<i class="fas fa-check"></i> Copiado';
          element.style.background = '#00ffaa';
          element.style.color = '#000';
          
          setTimeout(() => {
            element.innerHTML = originalText;
            element.style.background = '';
            element.style.color = '';
          }, 2000);
        }
      });
    }

    // Carica key esistenti dal server
    async function loadExistingKeys() {
      console.log('=== LOADING EXISTING KEYS ===');
      try {
        const response = await fetch('/api/keys');
        console.log('Keys API response status:', response.status);
        
        if (response.ok) {
          const keys = await response.json();
          console.log('Received keys:', keys);
          console.log('Number of keys received:', keys.length);
          
          if (keys && keys.length > 0) {
            addNewLicenses(keys);
            showNotification(`Caricate ${keys.length} licenze esistenti`, 'success');
          } else {
            console.log('No existing keys found');
            showNotification('Nessuna licenza trovata', 'info');
          }
        } else {
          const errorText = await response.text();
          console.error('Server error loading keys:', response.status, errorText);
          showNotification('Errore nel caricamento delle licenze: ' + response.status, 'error');
        }
      } catch (error) {
        console.error('Network error loading keys:', error);
        showNotification('Errore di connessione nel caricamento delle licenze', 'error');
      }
    }

    // Nessuna licenza di esempio caricata
    
    // No color animation
  </script>
</body>
</html>q